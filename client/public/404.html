<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Trajecta</title>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // This script checks to see if a redirect is present in the query string,
      // converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which will cause the window to load the correct route.
      (function (l) {
        if (l.search[1] === "/") {
          var decoded = l.search
            .slice(1)
            .split("&")
            .map(function (s) {
              return s.replace(/~and~/g, "&");
            })
            .join("?");
          window.history.replaceState(
            null,
            null,
            l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      })(window.location);
    </script>
    <script type="text/javascript">
      // Redirect unknown routes to index.html with encoded path/query/hash.
      // Includes project-repo prefix for GitHub Pages project sites.
      var path = window.location.pathname;
      var search = window.location.search;
      var hash = window.location.hash;

      var segments = path.split("/").filter(Boolean);
      var isProjectPages =
        window.location.hostname.endsWith("github.io") && segments.length > 0;
      var repoPrefix = isProjectPages ? "/" + segments[0] : "";
      var appSegments = isProjectPages ? segments.slice(1) : segments;
      var encodedPath = appSegments.join("/");

      window.location.replace(
        window.location.protocol +
          "//" +
          window.location.hostname +
          (window.location.port ? ":" + window.location.port : "") +
          repoPrefix +
          "/?/" +
          encodedPath +
          (search ? "&" + search.slice(1) : "") +
          hash
      );
    </script>
  </head>
  <body></body>
</html>
